# Постраничная навигация с помощью AJAX
Данный шаблон реализует функционал догрузки новых элементов после показанных 
на странице.
<br><br>
Т.к. подобную задачу приходится решать часто, то решил вынести типовое 
решение в шаблон компонента. 

## Использование
### Подготовка:
1. Скачать папку с шаблоном компонента с GitHub.
2. Поместить папку с шаблоном копонента в <br>
``/bitrix/templates/<шаблон_сайта>/components/bitrix/system.pagenavigation/``
<br> или <br>
``/local/templates/<шаблона сайта>/components/bitrix/system.pagenavigation/``
### В вызове компонента:
1. В настройках компонента в визуальном редакторе либо напрямую в вызове
   компонента ``$APPLICATION->IncludeComponent(...)``, в котором нужно 
   использовать данный шаблон, указать данный шаблон постраничной навигации.
2. **Отключить** `режим AJAX`.

### В папке шаблона компонента списка (новостей, элементов каталога, ...):
1. Если присутствует файл ``result_modifier.php``, то поместить в него код
```php
if (array_key_exists('is_ajax', $_REQUEST) && $_REQUEST['is_ajax']=='y') {
	$APPLICATION->RestartBuffer();
}
```
Если такого файла в папке шаблона нет, то вставить этот код в ``template.
php`` перед началом вывода вёрстки.
2. Если присутствует файл ``component_epilog.php``, то поместить в него код
```php
if (array_key_exists('is_ajax', $_REQUEST) && $_REQUEST['is_ajax'] == 'y') {
	die();
}
```
Если такого файла нет, то поместить данный код после конца вывода всей вёрстки.
<br>

### Использование в JS
1. В файле ``script.js`` шаблона списка элементов использовать код:
```js
// пагинация
  const elementsList = document.querySelector(".gallery-list");
  const itemSelector = ".gallery-item";

  new InifinitePagination(elementsList, itemSelector).init();
```

## Детальное описание шаблона AJAX-пагинации
Конструктор класса принимает в себя 3 параметра:
1. `elementsList`:<br>
`DOM-элемент | CSS Selector` - список элементов, в котором находятся 
   изначальные элементы.<br><br> 
2. `itemCSSSelector`: <br>
`CSS Selector` - селектор элемента<br><br>
3. `appendHiddenRender`<br>
`DOM-элемент | CSS Selector` - элемент, в который будет временно рендериться 
   верстка, полученная по URL с кнопки. **Необязательный**, по умолчанию 
   равен `document.getElementById("infinite-pagination-render-block")`, 
   который выводится в `template.php` данного шаблона

## Кастомизация
**Не допускается**:
* Удалять атрибут `id` с кнопки в файле `template.php`

**Допускается**:
* Изменять CSS классы на кнопке
* Вносить изменения в CSS файл шаблона после комментария <br>`/* YOU CAN 
  CUSTOMIZE STYLES BELOW THIS LINE* */`
* Изменять текст на кнопке путем изменения строки в файле `/lang/ru/tepmlate.php` 
(путь указан относительно папки шаблона компонента). Название 
  параметра - `BTN_TEXT`.

**Изменения в методах класса `InifinitePagination` Вы делаете на свой страх и 
риск.**